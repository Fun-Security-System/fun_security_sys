#include "events_def.h"


/*----------------------------------------------------------------------
  |       LedEvent::LedEvent
  +---------------------------------------------------------------------*/

LedEvent::LedEvent(string msg){
    this->setEid(EEVENTID_LED_REQ);
    this->content_ = msg;
}

/*----------------------------------------------------------------------
  |       LedEvent::~LedEvent
  +---------------------------------------------------------------------*/

LedEvent::~LedEvent(){

}

/*----------------------------------------------------------------------
  |       LedEvent::setMsg
  +---------------------------------------------------------------------*/
  
void LedEvent::setMsg(string msg){
    this->content_ = msg;
}

/*----------------------------------------------------------------------
  |       LedEvent::ins
  +---------------------------------------------------------------------*/

LedEvent LedEvent::ins = LedEvent(LED_OFF);

/*----------------------------------------------------------------------
  |       LedEvent::ledOn
  +---------------------------------------------------------------------*/

void LedEvent::ledOn(){
    digitalWrite(LED_PIN, HIGH);
    //gpioWrite(this->gpio_, 1);
}

/*----------------------------------------------------------------------
  |       LedEvent::ledOff
  +---------------------------------------------------------------------*/

void LedEvent::ledOff(){
    digitalWrite(LED_PIN, LOW);
    //gpioWrite(this->gpio_, 1);
}


/*----------------------------------------------------------------------
  |       SoundEvent::SoundEvent
  +---------------------------------------------------------------------*/

SoundEvent::SoundEvent(int gpio, string msg){
    this->gpio_ = gpio;
    this->setEid(EEVENTID_SOUND_REQ);
    this->content_ = msg;
}

/*----------------------------------------------------------------------
  |       SoundEvent::~SoundEvent
  +---------------------------------------------------------------------*/

SoundEvent::~SoundEvent(){

}

/*----------------------------------------------------------------------
  |       SoundEvent::detectSound
  +---------------------------------------------------------------------*/

bool SoundEvent::detectSound(){
    if(digitalRead(this->gpio_) == LOW){
        //cout << "Sound detected!" << endl;
        return true;
    }else{
        //cout << "Sound not detected!" << endl;
        return false;
    }
    //gpioWrite(this->gpio_, 1);
}


/*----------------------------------------------------------------------
  |       Ws2811Event::Ws2811Event
  +---------------------------------------------------------------------*/

Ws2811Event::Ws2811Event(string msg)
{
    this->setEid(EEVENTID_WS2811_REQ);
    this->content_ = msg;

}
/*----------------------------------------------------------------------
  |       Ws2811Event::~Ws2811Event
  +---------------------------------------------------------------------*/
Ws2811Event::~Ws2811Event()
{

}
/*----------------------------------------------------------------------
  |       Ws2811Event::setMsg
  +---------------------------------------------------------------------*/
  
void Ws2811Event::setMsg(string msg){
    this->content_ = msg;
}


/*----------------------------------------------------------------------
  |       Ws2811Event::ins
  +---------------------------------------------------------------------*/

Ws2811Event Ws2811Event::ins = Ws2811Event(RAINBOW_COLOR);




/*----------------------------------------------------------------------
  |       CameraEvent::CameraEvent
  +---------------------------------------------------------------------*/
CameraEvent::CameraEvent()
{
     this->setEid(EEVENTID_CAMERA_REQ);
}

/*----------------------------------------------------------------------
  |       CameraEvent::~CameraEvent
  +---------------------------------------------------------------------*/

CameraEvent::~CameraEvent()
{

}


/*----------------------------------------------------------------------
  |       Sg90MotorEvent::Sg90MotorEvent
  +---------------------------------------------------------------------*/

Sg90MotorEvent::Sg90MotorEvent(string msg)
{
    this->setEid(EEVENTID_MOTOR_REQ);
    this->content_ = msg;

}
/*----------------------------------------------------------------------
  |       Sg90MotorEvent::~Sg90MotorEvent
  +---------------------------------------------------------------------*/
Sg90MotorEvent::~Sg90MotorEvent()
{

}
/*----------------------------------------------------------------------
  |       Sg90MotorEvent::setMsg
  +---------------------------------------------------------------------*/
  
void Sg90MotorEvent::setMsg(string msg){
    this->content_ = msg;
}


/*----------------------------------------------------------------------
  |       Sg90MotorEvent::ins
  +---------------------------------------------------------------------*/

Sg90MotorEvent Sg90MotorEvent::ins = Sg90MotorEvent(MOTOR_OFF);


/*----------------------------------------------------------------------
  |       Sg90MotorEvent::motorOn
  +---------------------------------------------------------------------*/

void Sg90MotorEvent::motorOn(){
    softPwmWrite(PWM_PIN, 15);
}

/*----------------------------------------------------------------------
  |       Sg90MotorEvent::motorOff
  +---------------------------------------------------------------------*/

void Sg90MotorEvent::motorOff(){
    softPwmWrite(PWM_PIN, 5);
}
